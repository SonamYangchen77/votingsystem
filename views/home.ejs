<%- include('partials/header') %>

<link rel="stylesheet" href="/css/home.css">

<div class="section">
  <div class="card">
    <h3></h3>
    <img src="/assets/fina.png" alt="UniVote Logo" style="width:100%; border-radius: 8px;">
    <p>Election 2025</p>
    <a href="/select-election" class="btn btn-primary">Vote Now</a>
  </div>

  <div class="card">
    <h3>Quick Links</h3>
    <ul>
      <li><a href="/candidate">View Candidates</a></li>
      <li><a href="/guideline">Voting Guidelines</a></li>
      <li><a href="/results">Results</a></li>
    </ul>
  </div>

  <div class="card candidate-carousel">
    <h3>Meet the Candidates</h3>

    <% if (candidates.length === 0) { %>
      <p>No candidates available at the moment.</p>
    <% } else { %>
      <div class="carousel">
        <% candidates.forEach((candidate, index) => { %>
          <div class="carousel-slide <%= index === 0 ? 'active' : '' %>">
            <img src="<%= candidate.candidate_image_url || '/assets/default.png' %>" alt="<%= candidate.full_name %>">
            <h4><%= candidate.full_name %></h4>
            <p><%= candidate.position %> â€¢ <%= candidate.course %> Year <%= candidate.year %></p>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</div>

<%- include('partials/footer') %>

<script>
  // --- Main Image Carousel ---
  const imageSlides = document.querySelectorAll('.carousel-img');
  let currentImage = 0;

  function showImageSlide(index) {
    imageSlides.forEach((slide, i) => {
      slide.classList.remove('active');
      if (i === index) slide.classList.add('active');
    });
  }

  function nextImageSlide() {
    currentImage = (currentImage + 1) % imageSlides.length;
    showImageSlide(currentImage);
  }

  if (imageSlides.length > 0) {
    showImageSlide(currentImage);
    setInterval(nextImageSlide, 5000); // Every 5 seconds
  }

  // --- Candidate Carousel ---
  const candidateSlides = document.querySelectorAll('.carousel-slide');
  let currentCandidate = 0;

  function showCandidateSlide(index) {
    candidateSlides.forEach((slide, i) => {
      slide.classList.remove('active');
      if (i === index) slide.classList.add('active');
    });
  }

  function nextCandidateSlide() {
    currentCandidate = (currentCandidate + 1) % candidateSlides.length;
    showCandidateSlide(currentCandidate);
  }

  if (candidateSlides.length > 0) {
    showCandidateSlide(currentCandidate);
    setInterval(nextCandidateSlide, 4000); // Every 4 seconds
  }

  // --- Navbar Toggle (optional but included for completeness) ---
  const navToggle = document.getElementById('navToggle');
  const navMenu = document.getElementById('navMenu');
  const icon = navToggle?.querySelector('i');

  if (navToggle && icon) {
    navToggle.addEventListener('click', () => {
      navMenu.classList.toggle('show');

      if (icon.classList.contains('fa-bars')) {
        icon.classList.remove('fa-bars');
        icon.classList.add('fa-times');
      } else {
        icon.classList.remove('fa-times');
        icon.classList.add('fa-bars');
      }
    });
  }
</script>


</body>
</html>
